= Data Storage and Maintenance
Eric Sandbling, https://github.com/ericsandbling
:toc:
:toclevels: 5
:sectnums:

This article describes the structure and usage of data storage and maintenance in the *Greger Cloud*.

:toc: right

== General

Data storage for Greger is facilitated with https://firebase.google.com/[Google Firebase].

== Design

.1wireDevices
----
{
  "1wireDevices" : {
    <Device ID> : {
      "timestamp" : <ISO8601 timestamp>,
      <Sensor 1> : <latest reading>,
      ...
      <Sensor N> : <latest reading>,
      "type" : <1-wire sensor type>
      "family" : <1-wire sensor family>
      "posts" : {
        <UID> : {
          "timestamp" : <ISO8601 timestamp>,
          <Sensor 1> : <latest reading>,
          ...
          <Sensor M> : <latest reading>,
        }
      }
    }
  }
}
----

Timestamp:: https://en.wikipedia.org/wiki/ISO_8601[ISO 8601] formatted timestamp, according to `yyyy-mm-ddThh:mm:ss.sssZ`

Device ID:: Unique identifier of the device/sensor.

Tags:: A tag for each data reading, e.g. temperature, humidity etc.

=== Adaptive time/space chunking

An approach to indexing not only on timestamp dimension but also on e.g. device ID.

== Concepts

=== Open Solutions

==== Timescale

[TIP]
====
http://www.timescale.com/

https://github.com/timescale/timescaledb
====

Enabling a variety of powerful time-series queries with the SQL you already know.

=== Paid solutions

==== InfluxData (InfluxDB)

TIP: https://www.influxdata.com/
